<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="docsearch:language" content="en">
        <meta name="author" content="Cyrille Médard de Chardon">

        <title>Traverse Survey Error Exercise</title>

        <link href="css/bootstrap.min.css" rel="stylesheet">
        <script src="js/bootstrap.min.js" type="text/javascript"></script>

        <script src="js/d3.v7.min.js" type="text/javascript"></script>
        <script src="js/quickhull.js" type="text/javascript"></script>

        <link href="css/tse.css" rel="stylesheet">
    </head>
    
    <body class="bg-light">
        <nav class="navbar navbar-dark bg-dark">
          <div class="container">
            <span class="navbar-brand mb-0 h1">Traverse Surveying & Error</span>
          </div>
        </nav>
        <div class="container pb-5">
            <div class="row">
                <div class="col-12">
                    <h1>Compass and Pace Traverse Surveying</h1>
                    <p>This tool helps track data and illustrate error when performing traverse surveying. While the focus here is on compass and paces to measure angle and distance, other tools could be used to provide greater precision.</p>
                    <p>See below for the instructions and the tool.</p>
                    <p>Already know what you're doing? <a href="#letsgo">Let's go!</a></o>
                </div>

                <div class="col-12 mb-4">
                    <h2>Instructions</h2>

                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>The situation.</strong> You only have a compass and would like to record the location of other features relative to a chosen point (e.g., rock cairn, geodetic benchmark).<br>
                            A benchmark is a good point to start such an activity, but not necesary.<br>
                            A benchmark is a marker, often made of metal, with an accurately known location according to a specific geographic coordinate system (i.e., a system of locating points for an area).<br>
                            The benefit of a geodetic benchmark is that your collected data can be tied or transferred directly to know geographic coordinate systems.
                        </div>
                        <div class="col-md-6">
                            <img src="rsc/bm.jpg" class="sizelim" width="100%"><br>
                                A benchmark in France (<a href="https://commons.wikimedia.org/wiki/File:Point_Geographique_(geodetic_monument)_on_Corsica.jpg">Amada44</a>, <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>, via Wikimedia Commons)
                        </div>

                        <div class="col-md-6">
                            <p><strong>Dealing with error.</strong> For this exercise we will be using a compass and paces. A pace is, when walking, one step or the distance between where one foot lifts off the ground and the other touches down again, at a consistent point (e.g., the tip or heel of the feet).</p>
                        </div>
                    </div>
                </div>

                <hr>

                <div class="col">
                    <h2 id="letsgo">Traverse activity</h2>
                    <p>The step preceeding the calculation of points relative to your bench mark is to calculate your error in distance and direction.</p>

                    <h3>Calculating your error</h3>
                    <p>Before starting a traverse we would like to know the error percentage for distance and azimuth/direction.</p>

                    <h4>Distance error</h4>
                    <p>Depending on your means of measuring distance (among other possible causes) you will have a different error rate in measurement. Using paces will have more error than a tape measure for example.</p>
                    <p>Do you already know your pace distance and error percentage?</p>
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <button id="distance_error_yes" class="btn btn-outline-primary">Yes</button>
                            <button id="distance_error_no" class="btn btn-outline-primary">No</button>
                            <div class="form-text">If you're unsure, select 'No'.</div>
                        </div>

                        <div class="d-none col-md-6" id="known_pace_and_error_input">
                            <label>Enter your mean pace length:</label>
                            <input type="number" class="form-control" id="known_pace_length" placeholder="e.g., 0.8" required>
                            <div class="form-text">Metres is recommended</div>

                            <label>Enter your known error percentage for distance measurements:</label>
                            <input type="number" class="form-control" id="known_error_percentage" placeholder="%" required>
                            <div class="form-text">The percentage error</div>

                            <div class="text-end">
                                <button id="submit_distance_error" class="btn btn-primary">Submit pace and error</button>
                            </div>
                        </div>
                    </div>

                    <div id="calc_error_input" class="d-none row">
                        <h4>Pace measurement exercise</h4>
                        <div class="col-md-6">
                            <p>To calculate your distance measurement error we will take measurements between two points of known distance. For this exercise we will ignore the error between these two points (e.g., perhaps the distance was measured with a tape measure that also has error).</p>
                            <label>What is the distance between the known points?</label>
                            <input type="number" class="form-control" id="pacing_distance" placeholder="60 (metres)" required>
                            <div class="form-text">This need not be a round number.<br>Look for a clear boundary/line</div>
                            <div class="text-end">
                                <button id="submit_pace_distance" class="btn btn-primary">Submit distance</button>
                            </div>
                        </div>

                        <div class="d-none col-md-6" id="input_pace_test">
                            <p>Walk the distance between the points repeatedly, submitting the number of paces you took to complete the distance.</p>
                            <label>Number of paces</label>
                            <input type="number" class="form-control" id="pacing_trial_value" placeholder="number of paces in trial" required>
                            <div class="form-text">Providing decimals increases accuracy</div>
                            <div class="text-end">
                                <button id="submit_pace_trial" class="btn btn-primary">Submit pace trial</button>
                            </div>
                        </div>

                        <div class="d-none col-sm-12 mt-4" id="pace_data_table">
                        </div>
                    </div>

                    <h4 class="mt-4">Direction / Azimuth error</h4>
                    <p>Azimuth is the compass direction. Compass directions also have error.</p>
                    <p>While distance error will be percentage based, azimuth error is value based.</p>
                    <label>Please estimate your azimuth accuracy in degrees:</label>
                    <input type="number" class="form-control" id="azim_error_input" placeholder="e.g., 2">
                    <div class="form-text">We will improve this to test your error assumptions in the future</div>
                    <div class="text-end">
                        <button id="submit_azim_error" class="btn btn-primary">Submit direction error</button>
                    </div>

                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <h2>Begin survey traverse</h2>
                    <p>The area below represents your field space. The icon in the centre is your starting benchmark - a known point that you will base your measurements upon.</p>
                    <p><strong>Select the benchmark or stations to see possible operations.</strong></p>
                    <div id="controls" class="invisible">
                        <p>
                            <button id="control_add_leg" class="btn btn-outline-primary">Add leg</button>
                            <button id="control_edit" class="btn btn-outline-secondary">Edit station</button>
                            <button id="control_wall" class="btn btn-outline-secondary d-none" disabled>Draw wall to point</button>
                            <button id="control_delete" class="btn btn-outline-danger d-none" disabled>Delete point</button>
                            <button id="control_close" class="btn btn-outline-dark float-end">X</button>
                        </p>
                    </div>
                    <div id="form_add_leg" class="d-none mb-3">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label>Enter target azimuth:</label>
                                <input type="number" class="form-control" id="target_azim" placeholder="" required>
                                <div class="form-text">In degrees (0-360)</div>
                            </div>

                            <div class="col-md-6">
                                <label>Enter target distance:</label>
                                <input type="number" class="form-control" id="target_distance" placeholder="" required>
                                <div class="form-text">In number of paces</div>
                            </div>
                            <div class="col-md-6">
                                <label>Target description or name:</label>
                                <input type="text" class="form-control" id="target_description" placeholder="">
                                <div class="form-text">Some notes or a name for the feature (e.g., Tree A)</div>
                            </div>
                            <div class="col-md-6">
                                <p>Target is of type:</p>
                                <input type="radio" name="target_type" id="target_type_point" value="point" checked>
                                <label for="target_type_point" class="me-4">Station</label>
                                <input type="radio" name="target_type" id="target_type_benchmark" value="benchmark">
                                <label for="target_type_benchmark">Benchmark</label>
                            </div>
                        </div>


                        <div class="text-end">
                            <button id="submit_new_leg" class="btn btn-primary">Add leg</button>
                        </div>
                    </div>
                    <div id="form_edit" class="d-none">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label>Edit azimuth to this station:</label>
                                <input type="number" class="form-control" id="edit_station_azim" placeholder="" required>
                                <div class="form-text"></div>
                            </div>

                            <div class="col-md-6">
                                <label>Edit pace count to this station:</label>
                                <input type="number" class="form-control" id="edit_station_paces" placeholder="" required>
                                <div class="form-text">In paces</div>
                            </div>
                            <div class="col-md-6">
                                <label>Edit description or name:</label>
                                <input type="text" class="form-control" id="edit_station_description" placeholder="">
                                <div class="form-text"></div>
                            </div>
                            <div class="col-md-6">
                                <p>Edit station type:</p>
                                <input type="radio" name="edit_station_type" id="edit_station_type_point" value="point">
                                <label for="edit_station_type_point" class="me-4">Station</label>
                                <input type="radio" name="edit_station_type" id="edit_station_type_benchmark" value="benchmark">
                                <label for="edit_station_type_benchmark">Benchmark</label>
                            </div>
                        </div>


                        <div class="text-end">
                            <button id="submit_station_edit" class="btn btn-primary">Edit leg</button>
                        </div>
                    </div>
                    <div id="form_wall_instructions" class="d-none">
                        <p>Click on another point to create a wall from between points.</p>
                    </div>

                    <!-- SVG CSS -->
                    <style>
                    .pointer {
                        cursor: pointer;
                        stroke: black;
                        fill: white;
                    }
                    .selection {
                        fill: #0B5ED7;
                    }
                    .leg_line {
                        stroke-dasharray: 2;
                        stroke: black;
                    }
                    .error_poly {
                        opacity: 0.3;
                        stroke: black;
                        fill: white;
                    }
                    .hover {
                        cursor: pointer;
                        transition: opacity 0.5s;
                    }
                    .hover:hover {
                        opacity: 1;
                    }
                    svg {
                        background-color: #acd1af;
                        max-height: 600px;
                    }

                    </style>

                    <p id="results"></p>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <h2>Objective</h2>
                    <p>To provide a follow-up exercise to traditional traverse exercises that consist of field work, returning to the lab for trigonometric computation of point locations along the traverse and graphing of the points. This tool allows easier graphing of points, reducing error of that process when surveying error is already significant. Secondly the tool allows better visualization of measurements error.</p>
                    <h2>Further aspects to develop for Tranverse Survey Error exercise (TSE):</h2>
                    <ul>
                        <li>Discuss open and closed (loop and between BM) traverses</li>
                        <li>Provide ability to add backsights to increase azimuth accuracy</li>
                        <li>What is North: Magnetic vs true</li>
                        <li>Enable showing of work to calculate point locations, error correction.</li>
                        <li>Integrate level-traverse visualization - see <a href="https://www.boeingconsult.com/tafe/ss&so/survey1/level/notes-sur1.htm#sect1">example</a>.</li>
                        <li>Improve layout - flow of data entry and narrative</li>
                        <li>Elaborate on purposes - e.g., measuring the area, locating sampling points, everything that we use GPS for, understanding how it used to be done.</li>
                        <li>Add exercise context of field notes - TSE can be used in parallel but shouldn't replace.</li>
                        <li>Harmonize terms - define them (e.g., leg, station, position)</li>
                        <li>Add scale bar, north arrow</li>
                        <li>Add table view of legs/stations</li>
                        <li>Add export of data (GeoJSON?)</li>
                    </ul>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h2>Test</h2>
                    <p>Some automated inputs for testing:</p>
                    <ol>
                        <li><a href="#/" onclick="TSE.test(1)">Generate pace trials</a></li>
                        <li><a href="#/" onclick="TSE.test(2)">Add stations</a></li>
                    </ol>
                </div>
            </div>
        </div>
        <footer class="container-fluid mt-5 pb-5 bg-dark text-light">
            <div class="container">
                <div class="row align-items-start">
                    <div class="col-sm-6 col-lg-6 mt-5">
                        <h3 class="mb-4">By</h3>
                        <p>Cyrille Médard de Chardon</p>
                        <p>Want to <a href="https://github.com/serialc/traverse_survey_error">contribute</a>?</p>
                  </div>

                  <div class="col-sm-6 col-lg-6 mt-5">
                    <h3 class="mb-4">Using</h3>
                    <a href="https://getbootstrap.com/">Bootstrap</a><br>
                    <a href="https://d3js.org/">D3.js</a><br>
                    <a href="https://github.com/claytongulick/quickhull">Clayton Gulick's QuickHull</a><br>
                  </div>
                </div>
            </div>
        </footer>
    </body>
    <script src="js/tse.js" type="text/javascript"></script>
</html>
